(this.webpackJsonpfoobartory=this.webpackJsonpfoobartory||[]).push([[0],{50:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var i,o=n(1),a=n.n(o),r=n(34),s=n.n(r),c=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),a(t),r(t)}))},u=n(5),h=n(7),l=n(9),b=n(10),m=function(){function t(){Object(l.a)(this,t)}return Object(b.a)(t,[{key:"getCurrentTime",value:function(){return Date.now()}}]),t}(),d=n(12);!function(t){t.MOVING="moving",t.MINING_FOO="mining foo",t.MINING_BAR="mining bar",t.ASSEMBLING="assembling",t.BUYING_ROBOT="buying robot",t.WAITING="waiting"}(i||(i={}));var f,O={actionType:i.MOVING,totalDuration:5e3},v={actionType:i.MINING_FOO,totalDuration:1e3},g={actionType:i.MINING_BAR,randomBetween:[500,2e3]},p={actionType:i.ASSEMBLING,totalDuration:2e3},A={actionType:i.BUYING_ROBOT,totalDuration:0},j={actionType:i.WAITING,totalDuration:0},y={foos:1,bars:1,foobars:0},T={foos:6,bars:0,foobars:3},w=n(23),x=n(25),k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;Object(l.a)(this,t),this.callbacks=e}return Object(b.a)(t,[{key:"subscribe",value:function(t,e){var n;null===(n=this.callbacks.get(t))||void 0===n||n.push(e)}},{key:"trigger",value:function(t,e){var n=this.callbacks.get(t);n&&n.forEach((function(t){t(e)}))}}]),t}();!function(t){t[t.ROBOT_LOCATION=0]="ROBOT_LOCATION",t[t.ROBOT_NEXT_LOCATION=1]="ROBOT_NEXT_LOCATION"}(f||(f={}));var N,_=function(t){Object(w.a)(n,t);var e=Object(x.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).callbacks.set(f.ROBOT_LOCATION,[]),t.callbacks.set(f.ROBOT_NEXT_LOCATION,[]),t}return n}(k);!function(t){t[t.FOOS_AMOUNT=0]="FOOS_AMOUNT",t[t.BARS_AMOUNT=1]="BARS_AMOUNT",t[t.FOOBARS_AMOUNT=2]="FOOBARS_AMOUNT",t[t.ROBOTS_AMOUNT=3]="ROBOTS_AMOUNT"}(N||(N={}));var L,M=function(t){Object(w.a)(n,t);var e=Object(x.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).callbacks.set(N.FOOS_AMOUNT,[]),t.callbacks.set(N.BARS_AMOUNT,[]),t.callbacks.set(N.FOOBARS_AMOUNT,[]),t.callbacks.set(N.ROBOTS_AMOUNT,[]),t}return n}(k),S=n(13),B=n(35),R=function(){function t(){Object(l.a)(this,t)}return Object(b.a)(t,[{key:"randomPercentageSuccess",value:function(t){if(t<0||t>100)throw new Error("The given percentage has to be between 0 and 100, not ".concat(t,"."));return 100*Math.random()<t}},{key:"randomBetweenTwoValues",value:function(t,e){return t+Math.random()*(e-t)}},{key:"chooseValue",value:function(t){this._checkWeights(t);var e,n=Array.from(t.values()).reduce((function(t,e){return t+e})),i=Math.random()*n,o=t.entries().next().value,a=0,r=Object(B.a)(t);try{for(r.s();!(e=r.n()).done;){var s=Object(S.a)(e.value,2),c=s[0];if(i<=(a+=s[1])){o=c;break}}}catch(u){r.e(u)}finally{r.f()}return o}},{key:"_checkWeights",value:function(t){var e=Array.from(t.values());if(e.some((function(t){return t<0}))){var n=Array.from(t.entries());throw new Error("Negative weights are not allowed. Entries: ".concat(n))}if(e.every((function(t){return 0===t}))){var i=Array.from(t.entries());throw new Error("At least one of the weights has to be > 0. Entries: ".concat(i))}}}]),t}();!function(t){t.FOO_MINE="foo mine",t.BAR_MINE="bar mine",t.ASSEMBLING_FACTORY="assembling factory",t.SHOP="shop",t.TRANSITION="transition"}(L||(L={}));var I,F=function(){function t(e,n){Object(l.a)(this,t),this.store=e,this.location=void 0,this.action=void 0,this.randomGenerator=void 0,this.nextLocation=void 0,this.actionStartTime=void 0,this.keepLocation=void 0,this.observable=void 0,this.previousLocation=void 0,this.previousAction=void 0,this.keepLocation=!1,this.action=j,this.previousAction=j,this.actionStartTime=null,this.observable=e.getRobotsObservable(),this.store.addRobot(this),this.nextLocation=null,this.setNextLocation(this.nextLocation),this.location=L.SHOP,this.setLocation((null===n||void 0===n?void 0:n.initialLocation)?n.initialLocation:L.SHOP),this.previousLocation=L.SHOP,this.randomGenerator=(null===n||void 0===n?void 0:n.randomGenerator)?null===n||void 0===n?void 0:n.randomGenerator:new R}return Object(b.a)(t,[{key:"tick",value:function(t){if(null!==this.actionStartTime){var e,n,i=t-this.actionStartTime;if("randomBetween"in this.action)e=(n=this.randomGenerator).randomBetweenTwoValues.apply(n,Object(d.a)(this.action.randomBetween));else e=this.action.totalDuration;i>=e&&this._endAction()}}},{key:"_endAction",value:function(){switch(this.action.actionType){case O.actionType:if(!this.nextLocation)throw new Error("The robot can't end its move without a location specified.");this._moveTo(this.nextLocation);break;case v.actionType:this._mineFoo();break;case g.actionType:this._mineBar();break;case p.actionType:this._assemble();break;case A.actionType:this._buyRobot();break;default:throw new Error("There is a start time defined for an action, but the action of the robot is incorrect (".concat(this.action.actionType,")."))}this.setAction(j),this.actionStartTime=null}},{key:"_moveTo",value:function(t){this.setLocation(t),this.setNextLocation(null)}},{key:"_mineFoo",value:function(){this.store.setFoosAmount(this.store.getFoosAmount()+1)}},{key:"_mineBar",value:function(){this.store.setBarsAmount(this.store.getBarsAmount()+1)}},{key:"_assemble",value:function(){this.randomGenerator.randomPercentageSuccess(60)?this.store.setFoobarsAmount(this.store.getFoobarsAmount()+1):this.store.setBarsAmount(this.store.getBarsAmount()+1)}},{key:"_buyRobot",value:function(){new t(this.store)}},{key:"startMoving",value:function(t){this.checkAvailable(),this._checkLocationSpecified(),this._checkNotKeepingLocation(),this.setLocation(L.TRANSITION),this.setAction(O),this.actionStartTime=t}},{key:"startMining",value:function(t){if(this.checkAvailable(),this.location===L.FOO_MINE)this.setAction(v);else{if(this.location!==L.BAR_MINE)throw new Error("The robot has to be in a mine to mine, here it is in ".concat(this.location,"."));this.setAction(g)}this.actionStartTime=t}},{key:"startAssembling",value:function(t){this.checkAvailable(),this._checkLocation(L.ASSEMBLING_FACTORY),this._checkRessources("To create a foobar the robot needs one foo and one bar",y),this.setAction(p),this.actionStartTime=t,this.store.setBarsAmount(this.store.getBarsAmount()-1),this.store.setFoosAmount(this.store.getFoosAmount()-1)}},{key:"startBuyingRobot",value:function(t){this.checkAvailable(),this._checkLocation(L.SHOP),this._checkRessources("To buy a new robot, the robot needs 6 foos and 3 foobars",T),this.setAction(A),this.actionStartTime=t,this.store.setFoobarsAmount(this.store.getFoobarsAmount()-3),this.store.setFoosAmount(this.store.getFoosAmount()-6)}},{key:"_checkLocation",value:function(t){if(t!==this.location)throw new Error("The robot has to be in the ".concat(t,", here it is in ").concat(this.location,"."))}},{key:"_checkLocationSpecified",value:function(){if(!this.getNextLocation())throw new Error("The robot can't start moving without next location specified.")}},{key:"_checkNotKeepingLocation",value:function(){if(this.getKeepLocation())throw new Error("The robot can't start moving while it has been asked to keep its location.")}},{key:"_checkRessources",value:function(t,e){if(!(this.store.getFoobarsAmount()>=e.foobars&&this.store.getFoosAmount()>=e.foos&&this.store.getBarsAmount()>=e.bars))throw new Error("".concat(t,".\n        There are only ").concat(this.store.getFoosAmount()," foos, ").concat(this.store.getBarsAmount()," bars and ").concat(this.store.getFoobarsAmount()," foobars."))}},{key:"checkAvailable",value:function(){if(!this.isAvailable())throw new Error("The robot is not available yet")}},{key:"canAssemble",value:function(){return this._canDoAction(y)}},{key:"canBuyRobot",value:function(){return this._canDoAction(T)}},{key:"_canDoAction",value:function(t){try{this._checkRessources("",t)}catch(e){return!1}return!0}},{key:"isAvailable",value:function(){return this.action===j}},{key:"subscribe",value:function(t,e){this.observable.subscribe(t,e)}},{key:"setNextLocation",value:function(t){this.nextLocation=t;var e=[];this.store.getRobots().forEach((function(t){e.push(t.getNextLocation())})),this.observable.trigger(f.ROBOT_NEXT_LOCATION,e)}},{key:"getNextLocation",value:function(){return this.nextLocation}},{key:"getLocation",value:function(){return this.location}},{key:"setLocation",value:function(t){this.previousLocation=this.location,this.location=t;var e=[];this.store.getRobots().forEach((function(t){e.push(t.getLocation())})),this.observable.trigger(f.ROBOT_LOCATION,e)}},{key:"getAction",value:function(){return this.action}},{key:"setAction",value:function(t){this.previousAction=this.action,this.action=t}},{key:"getPreviousAction",value:function(){return this.previousAction}},{key:"setKeepLocation",value:function(t){this.keepLocation=t}},{key:"getKeepLocation",value:function(){return this.keepLocation}},{key:"getPreviousLocation",value:function(){return this.previousLocation}}]),t}(),E=function(){function t(){Object(l.a)(this,t),this.foosAmount=void 0,this.barsAmount=void 0,this.fooBarsAmount=void 0,this.robots=void 0,this.observable=void 0,this.robotsObservable=void 0,this.observable=new M,this.robotsObservable=new _,this.foosAmount=0,this.barsAmount=0,this.fooBarsAmount=0,this.robots=[]}return Object(b.a)(t,[{key:"subscribe",value:function(t,e){this.observable.subscribe(t,e)}},{key:"subscribeToRobots",value:function(t,e){this.robotsObservable.subscribe(t,e)}},{key:"setFoosAmount",value:function(t){this.foosAmount=t,this.observable.trigger(N.FOOS_AMOUNT,this.foosAmount)}},{key:"getFoosAmount",value:function(){return this.foosAmount}},{key:"setBarsAmount",value:function(t){this.barsAmount=t,this.observable.trigger(N.BARS_AMOUNT,this.barsAmount)}},{key:"getBarsAmount",value:function(){return this.barsAmount}},{key:"setFoobarsAmount",value:function(t){this.fooBarsAmount=t,this.observable.trigger(N.FOOBARS_AMOUNT,this.fooBarsAmount)}},{key:"getFoobarsAmount",value:function(){return this.fooBarsAmount}},{key:"addRobot",value:function(t){this.robots.push(t),this.observable.trigger(N.ROBOTS_AMOUNT,this.robots.length)}},{key:"getRobots",value:function(){return this.robots}},{key:"getRobotsObservable",value:function(){return this.robotsObservable}}]),t}(),z=function(){function t(e,n){Object(l.a)(this,t),this.strategy=e,this.store=void 0,this.dateTime=void 0,this.started=void 0,this.startTime=void 0,this.store=new E,this.dateTime=(null===n||void 0===n?void 0:n.dateTime)?n.dateTime:new m,new F(this.store),new F(this.store),this.started=!1,this.startTime=null}return Object(b.a)(t,[{key:"start",value:function(){var t=this;this.started=!0,this.startTime=this.dateTime.getCurrentTime();var e=0;!function n(){var i=t.dateTime.getCurrentTime();t.strategy.actOnOneFrame(i,t.store),t.started&&t.store.getRobots().length<20?e=requestAnimationFrame(n):(cancelAnimationFrame(e),t.started=!1,t.startTime=null)}()}},{key:"stop",value:function(){this.started=!1,this.startTime=null}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getStarted",value:function(){return this.started}},{key:"getCurrentTime",value:function(){if(this.started)return this.dateTime.getCurrentTime();throw new Error("The game is not started")}},{key:"getStrategy",value:function(){return this.strategy}},{key:"setRobotNextLocation",value:function(t,e){this.store.getRobots()[t].setNextLocation(e)}},{key:"getRobotLocation",value:function(t){return this.store.getRobots()[t].getLocation()}},{key:"subscribeToAmount",value:function(t,e){this.store.subscribe(t,e)}},{key:"subscribeToRobots",value:function(t,e){this.store.subscribeToRobots(t,e)}}]),t}(),C=function(){function t(e){Object(l.a)(this,t),this.randomGenerator=void 0,this.automaticMovementProbability=void 0,this.automaticLocationProbabilities=void 0,this.randomGenerator=(null===e||void 0===e?void 0:e.randomGenerator)?e.randomGenerator:new R,this.automaticMovementProbability=50,this.automaticLocationProbabilities=new Map([[L.FOO_MINE,50],[L.BAR_MINE,50],[L.ASSEMBLING_FACTORY,50],[L.SHOP,50]])}return Object(b.a)(t,[{key:"setLocationWeight",value:function(t,e){if(e<0)throw new Error("The assigned weight ".concat(e," has to be greater than 0."));this.automaticLocationProbabilities.set(t,e)}},{key:"getLocationWeight",value:function(t){return this.automaticLocationProbabilities.get(t)}},{key:"setAutomaticMovementProbability",value:function(t){this.automaticMovementProbability=t}},{key:"getAutomaticMovementProbability",value:function(){return this.automaticMovementProbability}},{key:"actOnOneFrame",value:function(t,e){var n=this;e.getRobots().forEach((function(e){(e.tick(t),e.isAvailable())&&(e.getNextLocation()&&!e.getKeepLocation()?e.startMoving(t):n._handleAutomaticActions(e,t))}))}},{key:"_handleAutomaticActions",value:function(t,e){var n=t.getPreviousAction()===O;this.randomGenerator.randomPercentageSuccess(this.automaticMovementProbability)&&!t.getKeepLocation()&&!n?this._doAutomaticMove(t,e):this._doAutomaticOtherActions(t,e)}},{key:"_doAutomaticMove",value:function(t,e){var n=new Map(this.automaticLocationProbabilities);n.delete(t.getLocation());try{var i=this.randomGenerator.chooseValue(n);t.setNextLocation(i),t.startMoving(e)}catch(o){if(!o.message.includes("At least one of the weights has to be > 0"))throw o}}},{key:"_doAutomaticOtherActions",value:function(t,e){switch(t.getLocation()){case L.FOO_MINE:case L.BAR_MINE:t.startMining(e);break;case L.ASSEMBLING_FACTORY:t.canAssemble()?t.startAssembling(e):(t.setAction(j),t.setLocation(t.getLocation()));break;case L.SHOP:t.canBuyRobot()?t.startBuyingRobot(e):(t.setAction(j),t.setLocation(t.getLocation()));break;default:throw new Error("An action has been requested while the robot was the wrong location (".concat(t.getLocation(),")."))}}}]),t}(),P=a.a.createContext(new z(new C)),G=n(2),V=h.a.span(I||(I=Object(u.a)(["\n  font-size: 1.6rem;\n  padding: 0.5rem 0;\n\n  @media (min-width: 600px) {\n    font-size: 1.7rem;\n  }\n  @media (min-width: 950px) {\n    font-size: 1.8rem;\n  }\n"])));var U,H,Y=function(){var t=Object(o.useContext)(P),e=Object(o.useState)(0),n=Object(S.a)(e,2),i=n[0],a=n[1];function r(t){return t<10?"0"+t:""+t}return Object(o.useEffect)((function(){var e=setInterval((function(){if(t.getStarted())try{a(t.getCurrentTime())}catch(n){clearInterval(e)}}),100);return function(){return clearInterval(e)}}),[t]),Object(G.jsx)(V,{children:function(e){var n=t.getStartTime();if(n){var i=new Date(e-n),o=r(i.getMinutes()),a=r(i.getSeconds());return"".concat(o,":").concat(a)}return"00:00"}(i)})},D=n(11),W=n(71),K=n(72),X=n(3),q=Object(D.a)(U||(U=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem 0;\n"]))),J=h.a.li(H||(H=Object(u.a)(["\n  ","\n  ","\n"])),q,(function(t){return t.first?"margin-bottom: 2rem;\n        @media (min-width: 950px) {\n          margin-bottom: 0;\n          grid-column: span 2;\n          width: 60%;\n          justify-self: center;\n        }":""})),Z=Object(K.a)({root:{'& .MuiSlider-markLabel[data-index="0"]':{transform:"translateX(0%)"},'& .MuiSlider-markLabel[data-index="1"]':{transform:"translateX(-100%)"}}}),Q=[{value:0,label:"0%"},{value:100,label:"100%"}];var $,tt=function(t){var e=t.id,n=t.text,i=t.defaultValue,o=t.onChange,a=t.first,r=Z();return Object(X.b)(J,{first:a,children:[Object(X.a)("label",{id:e,children:n}),Object(X.a)(W.a,{defaultValue:i,valueLabelDisplay:"auto",onChangeCommitted:o,"aria-labelledby":e,marks:a&&Q,className:r.root})]})},et=h.a.ul($||($=Object(u.a)(["\n  list-style-type: none;\n  padding-left: 0;\n  padding-top: 2rem;\n  border-top: solid 1px #ddd;\n  display: grid;\n\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n    border: none;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1.3fr 1fr 1fr;\n    column-gap: 5%;\n  }\n"])));var nt,it,ot,at,rt,st,ct=function(){var t=Object(o.useContext)(P).getStrategy();function e(e){return function(n,i){t.setLocationWeight(e,i)}}return Object(G.jsxs)(et,{children:[Object(G.jsx)(tt,{id:"movement-probability",text:"Probability to move",defaultValue:t.getAutomaticMovementProbability(),onChange:function(e,n){t.setAutomaticMovementProbability(n)},first:!0}),Object(G.jsx)(tt,{id:"foo-mine-weight",text:"Foo mine weight",defaultValue:t.getLocationWeight(L.FOO_MINE),onChange:e(L.FOO_MINE)}),Object(G.jsx)(tt,{id:"bar-mine-weight",text:"Bar mine weight",defaultValue:t.getLocationWeight(L.BAR_MINE),onChange:e(L.BAR_MINE)}),Object(G.jsx)(tt,{id:"assembling-factory-weight",text:"Assembling factory weight",defaultValue:t.getLocationWeight(L.ASSEMBLING_FACTORY),onChange:e(L.ASSEMBLING_FACTORY)}),Object(G.jsx)(tt,{id:"shop-weight",text:"Shop weight",defaultValue:t.getLocationWeight(L.SHOP),onChange:e(L.SHOP)})]})},ut=1.6,ht=1.3;function lt(t){var e=t.size,n=t.value;return Object(X.a)(ft,{top:5,left:30,rotate:170,size:e,children:Object(X.a)(vt,{value:n,top:1.5,right:1,size:e})})}function bt(t){var e=t.size,n=t.value;return Object(X.a)(ft,{top:5,right:30,rotate:300,size:e,children:Object(X.a)(vt,{value:n,top:1.5,left:1,size:e})})}function mt(t){var e=t.size,n=t.value;return Object(X.a)(ft,{bottom:5,left:30,rotate:120,size:e,children:Object(X.a)(vt,{value:n,bottom:1.5,right:1,size:e})})}function dt(t){var e=t.size,n=t.value;return Object(X.a)(ft,{bottom:5,right:30,rotate:350,size:e,children:Object(X.a)(vt,{value:n,bottom:1.5,left:1,size:e})})}function ft(t){var e=t.top,n=t.bottom,i=t.left,o=t.right,a=t.size,r=t.rotate,s=t.children;function c(t){return"".concat(e?h("top",e,t):"","\n        ").concat(n?h("bottom",n,t):"","\n        ").concat(i?l("left",i,t):"","\n        ").concat(o?l("right",o,t):"","\n        ")}function h(t,e,n){return"".concat(t,": calc(").concat(e,"rem - calc(").concat(n,"rem / 2));")}function l(t,e,n){return"".concat(t,": calc(").concat(e,"% - calc(").concat(n,"rem / 2));")}return Object(X.b)("div",{css:Object(D.a)(nt||(nt=Object(u.a)(["\n        transition: all 0.3s ease;\n        transition-property: top, bottom, left, right;\n        position: absolute;\n        ","\n\n        @media (min-width: 450px) {\n          ","\n        }\n        @media (min-width: 600px) {\n          ","\n        }\n      "])),c(a/ut),c(a/ht),c(a)),children:[Object(X.a)(Ot,{rotate:r,size:a}),s]})}function Ot(t){var e=t.rotate,n=t.size;return Object(X.a)("svg",{xmlns:"http://www.w3.org/2000/svg",css:Object(D.a)(it||(it=Object(u.a)(["\n        transition: all 0.3s ease;\n        transition-property: width, height;\n        transform: rotate(","deg);\n        width: ","rem;\n        height: ","rem;\n\n        @media (min-width: 450px) {\n          width: ","rem;\n          height: ","rem;\n        }\n        @media (min-width: 600px) {\n          width: ","rem;\n          height: ","rem;\n        }\n      "])),e,n/ut,n/ut,n/ht,n/ht,n,n),height:"100%",width:"100%",viewBox:"0 0 100 100",children:Object(X.a)("g",{children:Object(X.a)("path",{d:"M84.68,75.29l-13.78-31L64,53.77c-2.89-1.86-5.92-3.51-8.87-5.28L42.23,40.37C33.55,35,24.81,29.77,15.93,24.71l-.61.83c7.56,6.88,15.26,13.56,23,20.17l11.72,9.8c2.6,2.25,5.11,4.63,7.77,6.8L51,71.75Z"})})})}function vt(t){var e=t.value,n=t.size,i=t.top,o=t.bottom,a=t.left,r=t.right;function s(t){return"".concat(i?c("top",i,t):"","\n        ").concat(o?c("bottom",o,t):"","\n        ").concat(a?h("left",a,t):"","\n        ").concat(r?h("right",r,t):"","\n        font-size: ").concat(t/4.4,"rem;\n        ")}function c(t,e,n){return"".concat(t,": ").concat(e*n/7,"rem;")}function h(t,e,n){return"".concat(t,": ").concat(e*n/5,"rem;")}return Object(X.a)("span",{css:Object(D.a)(ot||(ot=Object(u.a)(["\n        position: absolute;\n        transition: all 0.3s ease;\n        transition-property: font-size, top, bottom, left, right;\n        ","\n\n        @media (min-width: 450px) {\n          ","\n        }\n        @media (min-width: 600px) {\n          ","\n        }\n      "])),s(n/ut),s(n/ht),s(n)),children:e})}var gt=Object(D.a)(at||(at=Object(u.a)(["\n  position: absolute;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  transition-property: width, height, top, left, font-size;\n  background-color: #333;\n  color: #eee;\n  display: grid;\n  place-content: center;\n"])));function pt(t){var e=t.size,n=t.children;return Object(X.a)(Tt,{size:e,positions:"top: 0; left: 0;",children:n})}function At(t){var e=t.size,n=t.children;return Object(X.a)(Tt,{size:e,positions:"top: 0; right: 0;",children:n})}function jt(t){var e=t.size,n=t.children;return Object(X.a)(Tt,{size:e,positions:"bottom: 0; left: 0;",children:n})}function yt(t){var e=t.size,n=t.children;return Object(X.a)(Tt,{size:e,positions:"bottom: 0; right: 0;",children:n})}function Tt(t){var e=t.size,n=t.positions,i=t.children;function o(t){return"width: ".concat(t,"rem;\n        height: ").concat(t,"rem;\n        font-size: ").concat(t/1.5,"rem;\n        ")}return Object(X.a)("div",{css:Object(D.a)(rt||(rt=Object(u.a)(["\n        ","\n        ","\n        ","\n\n        @media (min-width: 450px) {\n          ","\n        }\n        @media (min-width: 600px) {\n          ","\n        }\n      "])),gt,n,o(e/1.6),o(e/1.3),o(e)),children:i})}function wt(t){var e=t.size,n=t.children;function i(t){return"top: calc(50% - calc(".concat(t,"rem / 2));\n        left: calc(50% - calc(").concat(t,"rem / 2));\n        width: ").concat(t,"rem;\n        height: ").concat(t,"rem;\n        font-size: ").concat(t/1.5,"rem;\n        ")}return Object(X.a)("div",{css:Object(D.a)(st||(st=Object(u.a)(["\n        ","\n        ","\n\n        @media (min-width: 450px) {\n          ","\n        }\n        @media (min-width: 600px) {\n          ","\n        }\n      "])),gt,i(e/1.6),i(e/1.3),i(e)),children:n})}var xt,kt,Nt,_t,Lt,Mt,St,Bt=n(37),Rt=function(t){Object(w.a)(n,t);var e=Object(x.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"increment",value:function(t){this.has(t)&&this.set(t,this.get(t)+1)}},{key:"decrement",value:function(t){this.has(t)&&this.set(t,this.get(t)-1)}}]),n}(Object(Bt.a)(Map));function It(t){var e=t.game,n=t.initialValue,i=t.observed,a=Object(o.useState)(n),r=Object(S.a)(a,2),s=r[0],c=r[1];return Object(o.useEffect)((function(){e.subscribeToAmount(i,c)}),[e,i]),s}function Ft(t){var e=t.game,n=t.observedType,i=t.mapInitialValue,a=function(t){var e=t.game,n=t.initialValue,i=t.observed,a=Object(o.useState)(n),r=Object(S.a)(a,2),s=r[0],c=r[1];return Object(o.useEffect)((function(){e.subscribeToRobots(i,c)}),[e,i]),s}({game:e,initialValue:[],observed:n});return{robotsValues:Object(o.useMemo)((function(){var t=new Rt(i);return a.forEach((function(e){t.increment(e)})),t}),[a,i])}}var Et=h.a.ul(xt||(xt=Object(u.a)(["\n  height: 15rem;\n  position: relative;\n  margin: 3rem 0 3.7rem 0;\n  list-style-type: none;\n  padding: 0;\n\n  @media (min-width: 950px) {\n    flex: 1.35;\n    height: 17rem;\n  }\n"]))),zt=Object(D.a)(kt||(kt=Object(u.a)(["\n  position: absolute;\n  font-weight: bold;\n  padding: 0.2rem 0;\n  font-size: 1rem;\n\n  @media (min-width: 400px) {\n    font-size: 1.05rem;\n  }\n  @media (min-width: 600px) {\n    font-size: 1.13rem;\n  }\n"]))),Ct=h.a.span(Nt||(Nt=Object(u.a)(["\n  ","\n  top: -2.1rem;\n  left: 0;\n"])),zt),Pt=h.a.span(_t||(_t=Object(u.a)(["\n  ","\n  top: -2.1rem;\n  right: 0;\n"])),zt),Gt=h.a.span(Lt||(Lt=Object(u.a)(["\n  ","\n  bottom: -2.2rem;\n  left: 0;\n"])),zt),Vt=h.a.span(Mt||(Mt=Object(u.a)(["\n  ","\n  bottom: -2.2rem;\n  right: 0;\n"])),zt),Ut=h.a.span(St||(St=Object(u.a)(["\n  ","\n  transition: all 0.3s ease;\n  transition-property: top, left;\n  color: black;\n  bottom: -2rem;\n  left: calc(50% - 2rem);\n"])),zt);var Ht,Yt,Dt,Wt,Kt=function(){var t=Object(o.useContext)(P),e=function(t){return{robotsAmountByLocation:Ft({game:t,observedType:f.ROBOT_LOCATION,mapInitialValue:[[L.FOO_MINE,0],[L.BAR_MINE,0],[L.ASSEMBLING_FACTORY,0],[L.SHOP,0],[L.TRANSITION,0]]}).robotsValues}}(t).robotsAmountByLocation,n=function(t){return{robotsAmountByNextLocation:Ft({game:t,observedType:f.ROBOT_NEXT_LOCATION,mapInitialValue:[[L.FOO_MINE,0],[L.BAR_MINE,0],[L.ASSEMBLING_FACTORY,0],[L.SHOP,0]]}).robotsValues}}(t).robotsAmountByNextLocation,i=t.store.getRobots().length,a=t.store.getRobots().reduce((function(t,e){return e.getNextLocation()?t+1:t}),0);function r(t){var n=e.get(t);return i&&n?Math.sqrt(n)/Math.sqrt(i)*7:0}function s(t){var e=n.get(t);return a&&e?Math.pow(e,1/3)/Math.pow(a,1/3)*8:0}return Object(X.b)(Et,{children:[Object(X.b)("li",{children:[Object(X.a)(Ct,{children:"Foo mine"}),Object(X.a)(pt,{size:r(L.FOO_MINE),children:e.get(L.FOO_MINE)}),Object(X.a)(lt,{size:s(L.FOO_MINE),value:n.get(L.FOO_MINE)})]}),Object(X.b)("li",{children:[Object(X.a)(Pt,{children:"Bar mine"}),Object(X.a)(At,{size:r(L.BAR_MINE),children:e.get(L.BAR_MINE)}),Object(X.a)(bt,{size:s(L.BAR_MINE),value:n.get(L.BAR_MINE)})]}),Object(X.b)("li",{children:[Object(X.a)(Gt,{children:"Assembling factory"}),Object(X.a)(jt,{size:r(L.ASSEMBLING_FACTORY),children:e.get(L.ASSEMBLING_FACTORY)}),Object(X.a)(mt,{size:s(L.ASSEMBLING_FACTORY),value:n.get(L.ASSEMBLING_FACTORY)})]}),Object(X.b)("li",{children:[Object(X.a)(Vt,{children:"Shop"}),Object(X.a)(yt,{size:r(L.SHOP),children:e.get(L.SHOP)}),Object(X.a)(dt,{size:s(L.SHOP),value:n.get(L.SHOP)})]}),Object(X.a)("li",{children:Object(X.b)(wt,{size:r(L.TRANSITION),children:[Object(X.a)(Ut,{children:"Moving"}),e.get(L.TRANSITION)]})})]})},Xt=h.a.ul(Ht||(Ht=Object(u.a)(["\n  display: flex;\n  list-style-type: none;\n  padding: 0;\n  justify-content: space-around;\n  background-color: #eee;\n  border-radius: 0.3rem;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15);\n  padding: 0.3rem 0;\n\n  @media (min-width: 950px) {\n    flex: 1;\n    margin-right: 7%;\n    flex-wrap: wrap;\n    border-radius: 0.4rem;\n    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);\n  }\n  @media (min-width: 1200px) {\n    margin-right: 6%;\n  }\n"]))),qt=h.a.li(Yt||(Yt=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media (min-width: 950px) {\n    flex-basis: 50%;\n    justify-content: center;\n  }\n"]))),Jt=h.a.span(Dt||(Dt=Object(u.a)(["\n  font-weight: bold;\n  padding: 0.2rem 0.4rem;\n\n  @media (min-width: 950px) {\n    margin-bottom: 0.3rem;\n  }\n"]))),Zt=h.a.span(Wt||(Wt=Object(u.a)(["\n  padding: 0.2rem 0.4rem;\n  font-size: 1.1rem;\n\n  @media (min-width: 500px) {\n    font-size: 1.4rem;\n  }\n  @media (min-width: 950px) {\n    padding-top: 0.3rem;\n    font-size: 1.7rem;\n  }\n"])));var Qt,$t,te,ee,ne=function(){var t=Object(o.useContext)(P),e=It({game:t,initialValue:t.store.getFoosAmount(),observed:N.FOOS_AMOUNT}),n=It({game:t,initialValue:t.store.getBarsAmount(),observed:N.BARS_AMOUNT}),i=It({game:t,initialValue:t.store.getFoobarsAmount(),observed:N.FOOBARS_AMOUNT}),a=It({game:t,initialValue:t.store.getRobots().length,observed:N.ROBOTS_AMOUNT});return Object(G.jsxs)(Xt,{children:[Object(G.jsxs)(qt,{children:[Object(G.jsx)(Jt,{children:"Foos"}),Object(G.jsx)(Zt,{children:e})]}),Object(G.jsxs)(qt,{children:[Object(G.jsx)(Jt,{children:"Bars"}),Object(G.jsx)(Zt,{children:n})]}),Object(G.jsxs)(qt,{children:[Object(G.jsx)(Jt,{children:"Foobars"}),Object(G.jsx)(Zt,{children:i})]}),Object(G.jsxs)(qt,{children:[Object(G.jsx)(Jt,{children:"Robots"}),Object(G.jsxs)(Zt,{children:[a," / ",20]})]})]})},ie=(n(50),h.a.main(Qt||(Qt=Object(u.a)(["\n  padding: 1rem;\n  display: flex;\n  justify-content: center;\n\n  @media (min-width: 450px) {\n    padding: 1rem 2rem;\n  }\n  @media (min-width: 600px) {\n    padding: 1rem 8%;\n  }\n  @media (min-width: 950px) {\n    padding: 1rem 4rem;\n  }\n"])))),oe=h.a.div($t||($t=Object(u.a)(["\n  flex: 1;\n  max-width: 1200px;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 950px) {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    align-content: flex-start;\n  }\n"]))),ae=h.a.div(te||(te=Object(u.a)(["\n  margin: 1rem 0;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 350px) {\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n  }\n"]))),re=h.a.h1(ee||(ee=Object(u.a)(["\n  margin: 0;\n  padding: 0.5rem 0;\n\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n  }\n"])));var se=function(){var t=Object(o.useRef)(new z(new C));return Object(o.useEffect)((function(){t.current.start()}),[]),Object(G.jsx)(P.Provider,{value:t.current,children:Object(G.jsx)(ie,{role:"main",children:Object(G.jsxs)(oe,{children:[Object(G.jsxs)(ae,{children:[Object(G.jsx)(re,{children:"Foobartory"}),Object(G.jsx)(Y,{})]}),Object(G.jsx)(ne,{}),Object(G.jsx)(Kt,{}),Object(G.jsx)(ct,{})]})})})};s.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(se,{})}),document.getElementById("root")),c()}},[[51,1,2]]]);
//# sourceMappingURL=main.0b96d1ce.chunk.js.map