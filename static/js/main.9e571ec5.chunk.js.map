{"version":3,"sources":["domain/actions.ts","reportWebVitals.ts","domain/DateTime.ts","domain/Observable.ts","domain/Robot.ts","domain/RandomGenerator.ts","domain/Store.ts","domain/Game.ts","domain/Strategy.ts","ui/contexts/game.ts","ui/components/Counter/Counter.tsx","ui/components/ProbabilityCommands/SliderCommand.tsx","ui/components/ProbabilityCommands/ProbabilityCommands.tsx","ui/components/RobotsLocations/arrows.tsx","ui/components/RobotsLocations/circles.tsx","utils.ts","ui/hooks/useGameState.ts","ui/components/RobotsLocations/useRobotsAmountByLocation.ts","ui/components/RobotsLocations/RobotsLocations.tsx","ui/components/Statistics/Statistics.tsx","ui/Foobartory.tsx","index.tsx"],"names":["ActionType","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","RealDateTime","Date","now","ObservedRobot","MOVING","actionType","totalDuration","MINING_FOO","MINING_BAR","randomBetween","ASSEMBLING","BUYING_ROBOT","WAITING","ASSEMBLING_NEEDED_RESSOURCES","foos","bars","foobars","BUYING_ROBOT_NEEDED_RESSOURCES","Observable","callbacks","Map","information","callback","this","get","push","value","forEach","ObservedAmount","ObservableRobot","set","ROBOT_LOCATION","ROBOT_NEXT_LOCATION","Location","ObservableStore","FOOS_AMOUNT","BARS_AMOUNT","FOOBARS_AMOUNT","ROBOTS_AMOUNT","RealRandomGenerator","percentage","Error","Math","random","min","max","values","_checkWeights","weightsSum","Array","from","reduce","a","b","chosenValue","entries","next","sum","key","weights","some","x","every","Robot","store","options","location","action","randomGenerator","nextLocation","actionStartTime","keepLocation","observable","getRobotsObservable","addRobot","setNextLocation","SHOP","setLocation","initialLocation","currentTime","actionTotalDuration","actionCurrentDuration","randomBetweenTwoValues","_endAction","_moveTo","_mineFoo","_mineBar","_assemble","_buyRobot","setFoosAmount","getFoosAmount","setBarsAmount","getBarsAmount","randomPercentageSuccess","setFoobarsAmount","getFoobarsAmount","checkAvailable","_checkLocationSpecified","_checkNotKeepingLocation","TRANSITION","FOO_MINE","BAR_MINE","_checkLocation","ASSEMBLING_FACTORY","_checkRessources","getNextLocation","getKeepLocation","errorMessageBeginning","neededRessources","isAvailable","_canDoAction","subscribe","nextLocations","getRobots","robot","trigger","locations","getLocation","Store","foosAmount","barsAmount","fooBarsAmount","robots","robotsObservable","amount","length","Game","strategy","dateTime","started","startTime","getCurrentTime","requestId","nextFrame","actOnOneFrame","requestAnimationFrame","cancelAnimationFrame","id","subscribeToRobots","BasicStrategy","automaticMovementProbability","automaticLocationProbabilities","weight","probability","tick","startMoving","_handleAutomaticActions","_doAutomaticMove","_doAutomaticOtherActions","possibleLocations","delete","chosenLocation","chooseValue","exception","message","includes","startMining","canAssemble","startAssembling","canBuyRobot","startBuyingRobot","GameContext","React","createContext","Span","styled","span","Counter","game","useContext","useState","time","setTime","formatNumber","number","useEffect","interval","setInterval","getStarted","clearInterval","getStartTime","date","getMinutes","sec","getSeconds","formatDate","liStyle","css","Li","li","first","useStyles","makeStyles","root","transform","percentageMarks","label","SliderCommand","text","defaultValue","onChange","classes","Slider","valueLabelDisplay","onChangeCommitted","aria-labelledby","marks","className","List","ul","ProbabilityCommands","getStrategy","createLocationWeightChangeHandler","_","setLocationWeight","getAutomaticMovementProbability","setAutomaticMovementProbability","getLocationWeight","SMALL_RESPONSIVE_FACTOR","MEDIUM_RESPONSIVE_FACTOR","FooArrow","size","ArrowContainer","top","left","rotate","ArrowValue","right","BarArrow","FactoryArrow","bottom","ShopArrow","children","buildRules","buildVerticalPositionRule","buildHorizontalPositionRule","positionName","position","Arrow","xmlns","height","width","viewBox","d","circle","FooCircle","Circle","positions","BarCircle","FactoryCircle","ShopCircle","MovingCircle","IncrementableMap","has","useStoreState","initialValue","observed","storeState","setStoreState","subscribeToAmount","useRobotsValue","observedType","mapInitialValue","robotsNextLocation","robotState","setRobotState","useRobotState","robotsValues","useMemo","increment","MainSquare","FooLabel","BarLabel","FactoryLabel","ShopLabel","MovingLabel","RobotsLocations","robotsAmountByLocation","useRobotsAmountByLocation","robotsAmountByNextLocation","useRobotsAmountByNextLocation","totalRobotsAmount","totalRobotsWithNextLocation","accumulator","computeCircleSize","robotsInlocation","sqrt","computeArrowSize","robotsNextlocation","pow","Label","Value","Statistics","foobarsAmount","robotsAmount","Main","main","Container","div","TitleContainer","Title","h1","Foobartory","useRef","current","start","Provider","role","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9e571ec5.chunk.js","sourcesContent":["enum ActionType {\n  MOVING = \"moving\",\n  MINING_FOO = \"mining foo\",\n  MINING_BAR = \"mining bar\",\n  ASSEMBLING = \"assembling\",\n  BUYING_ROBOT = \"buying robot\",\n  WAITING = \"waiting\",\n}\n\ninterface ActionBase {\n  actionType: ActionType;\n}\ninterface ActionWithDuration extends ActionBase {\n  totalDuration: number;\n}\ninterface ActionWithRandom extends ActionBase {\n  randomBetween: [number, number];\n}\n\ntype Action = ActionWithDuration | ActionWithRandom;\n\nconst MOVING: Action = {\n  actionType: ActionType.MOVING,\n  totalDuration: 5000,\n};\n\nconst MINING_FOO: Action = {\n  actionType: ActionType.MINING_FOO,\n  totalDuration: 1000,\n};\n\nconst MINING_BAR: Action = {\n  actionType: ActionType.MINING_BAR,\n  randomBetween: [500, 2000],\n};\n\nconst ASSEMBLING: Action = {\n  actionType: ActionType.ASSEMBLING,\n  totalDuration: 2000,\n};\n\nconst BUYING_ROBOT: Action = {\n  actionType: ActionType.BUYING_ROBOT,\n  totalDuration: 0,\n};\n\nconst WAITING: Action = {\n  actionType: ActionType.WAITING,\n  totalDuration: 0,\n};\n\ntype NeededRessources = {\n  foos: number;\n  bars: number;\n  foobars: number;\n};\n\nconst ASSEMBLING_NEEDED_RESSOURCES: NeededRessources = {\n  foos: 1,\n  bars: 1,\n  foobars: 0,\n};\n\nconst BUYING_ROBOT_NEEDED_RESSOURCES: NeededRessources = {\n  foos: 6,\n  bars: 0,\n  foobars: 3,\n};\n\nexport {\n  MOVING,\n  MINING_BAR,\n  MINING_FOO,\n  ASSEMBLING,\n  BUYING_ROBOT,\n  WAITING,\n  ASSEMBLING_NEEDED_RESSOURCES,\n  BUYING_ROBOT_NEEDED_RESSOURCES,\n};\nexport type { Action, NeededRessources };\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","interface DateTime {\n  getCurrentTime(): number;\n}\n\nclass FakeDateTime implements DateTime {\n  constructor(private time: number = 0) {}\n\n  advance(miliseconds: number) {\n    this.time += miliseconds;\n  }\n\n  getCurrentTime(): number {\n    return this.time;\n  }\n}\n\nclass RealDateTime implements DateTime {\n  getCurrentTime(): number {\n    return Date.now();\n  }\n}\n\nexport { FakeDateTime, RealDateTime };\nexport type { DateTime };\n","class Observable<Observed> {\n  constructor(protected callbacks: Map<Observed, Function[]> = new Map()) {}\n\n  subscribe(information: Observed, callback: Function) {\n    this.callbacks.get(information)?.push(callback);\n  }\n\n  trigger<T>(information: Observed, value: T) {\n    const callbacks = this.callbacks.get(information);\n    if (callbacks) {\n      callbacks.forEach(function callObservers(callback) {\n        callback(value);\n      });\n    }\n  }\n}\n\nenum ObservedRobot {\n  ROBOT_LOCATION,\n  ROBOT_NEXT_LOCATION,\n}\n\nclass ObservableRobot extends Observable<ObservedRobot> {\n  constructor() {\n    super();\n    this.callbacks.set(ObservedRobot.ROBOT_LOCATION, []);\n    this.callbacks.set(ObservedRobot.ROBOT_NEXT_LOCATION, []);\n  }\n}\n\nenum ObservedAmount {\n  FOOS_AMOUNT,\n  BARS_AMOUNT,\n  FOOBARS_AMOUNT,\n  ROBOTS_AMOUNT,\n}\n\nclass ObservableStore extends Observable<ObservedAmount> {\n  constructor() {\n    super();\n    this.callbacks.set(ObservedAmount.FOOS_AMOUNT, []);\n    this.callbacks.set(ObservedAmount.BARS_AMOUNT, []);\n    this.callbacks.set(ObservedAmount.FOOBARS_AMOUNT, []);\n    this.callbacks.set(ObservedAmount.ROBOTS_AMOUNT, []);\n  }\n}\n\nexport {\n  Observable,\n  ObservableRobot,\n  ObservedRobot,\n  ObservableStore,\n  ObservedAmount,\n};\n","import {\n  Action,\n  ASSEMBLING,\n  ASSEMBLING_NEEDED_RESSOURCES,\n  BUYING_ROBOT,\n  BUYING_ROBOT_NEEDED_RESSOURCES,\n  MINING_BAR,\n  MINING_FOO,\n  MOVING,\n  NeededRessources,\n  WAITING,\n} from \"./actions\";\nimport { ObservableRobot, ObservedRobot } from \"./Observable\";\nimport { RandomGenerator, RealRandomGenerator } from \"./RandomGenerator\";\nimport { Store } from \"./Store\";\n\nenum Location {\n  FOO_MINE = \"foo mine\",\n  BAR_MINE = \"bar mine\",\n  ASSEMBLING_FACTORY = \"assembling factory\",\n  SHOP = \"shop\",\n  TRANSITION = \"transition\",\n}\n\ntype RobotOptions = {\n  randomGenerator?: RandomGenerator;\n  initialLocation?: Location;\n};\n\n/**\n * The robot is the main character. It does nothing by itself except\n * finishing the execution of the actions it was asked to start.\n * To make it finish its actions, it needs to get regularly its method\n * tick() called with the current time.\n */\nclass Robot {\n  private location: Location;\n  private action: Action;\n  private randomGenerator: RandomGenerator;\n  private nextLocation: Location | null;\n  private actionStartTime: number | null;\n  private keepLocation;\n  private observable: ObservableRobot;\n\n  constructor(private store: Store, options?: RobotOptions) {\n    this.keepLocation = false;\n    this.action = WAITING;\n    this.actionStartTime = null;\n    this.observable = store.getRobotsObservable();\n    this.store.addRobot(this);\n    this.nextLocation = null;\n    this.setNextLocation(this.nextLocation);\n    this.location = Location.SHOP;\n    this.setLocation(\n      options?.initialLocation ? options.initialLocation : Location.SHOP\n    );\n    this.randomGenerator = options?.randomGenerator\n      ? options?.randomGenerator\n      : new RealRandomGenerator();\n  }\n\n  /**\n   * If the current action duration has been reached, ends the\n   * action to make the robot available again, and executes its\n   * consequences.\n   * @param currentTime the current time in miliseconds.\n   */\n  tick(currentTime: number) {\n    if (this.actionStartTime !== null) {\n      const actionCurrentDuration = currentTime - this.actionStartTime;\n      let actionTotalDuration: number;\n      if (\"randomBetween\" in this.action) {\n        actionTotalDuration = this.randomGenerator.randomBetweenTwoValues(\n          ...this.action.randomBetween\n        );\n      } else {\n        actionTotalDuration = this.action.totalDuration;\n      }\n      if (actionCurrentDuration >= actionTotalDuration) {\n        this._endAction();\n      }\n    }\n  }\n\n  _endAction() {\n    switch (this.action.actionType) {\n      case MOVING.actionType: {\n        if (this.nextLocation) {\n          this._moveTo(this.nextLocation);\n        } else {\n          throw new Error(\n            \"The robot can't end its move without a location specified.\"\n          );\n        }\n        break;\n      }\n      case MINING_FOO.actionType: {\n        this._mineFoo();\n        break;\n      }\n      case MINING_BAR.actionType: {\n        this._mineBar();\n        break;\n      }\n      case ASSEMBLING.actionType: {\n        this._assemble();\n        break;\n      }\n      case BUYING_ROBOT.actionType: {\n        this._buyRobot();\n        break;\n      }\n      default: {\n        throw new Error(\n          `There is a start time defined for an action, but the action of the robot is incorrect (${this.action.actionType}).`\n        );\n      }\n    }\n    this.action = WAITING;\n    this.actionStartTime = null;\n  }\n\n  private _moveTo(location: Location) {\n    this.setLocation(location);\n    this.setNextLocation(null);\n  }\n\n  private _mineFoo() {\n    this.store.setFoosAmount(this.store.getFoosAmount() + 1);\n  }\n\n  private _mineBar() {\n    this.store.setBarsAmount(this.store.getBarsAmount() + 1);\n  }\n\n  private _assemble() {\n    const isAssemblingSuccessful =\n      this.randomGenerator.randomPercentageSuccess(60);\n    if (isAssemblingSuccessful) {\n      this.store.setFoobarsAmount(this.store.getFoobarsAmount() + 1);\n    } else {\n      this.store.setBarsAmount(this.store.getBarsAmount() + 1);\n    }\n  }\n\n  private _buyRobot() {\n    new Robot(this.store);\n  }\n\n  startMoving(currentTime: number) {\n    this.checkAvailable();\n    this._checkLocationSpecified();\n    this._checkNotKeepingLocation();\n    this.setLocation(Location.TRANSITION);\n    this.action = MOVING;\n    this.actionStartTime = currentTime;\n  }\n\n  startMining(currentTime: number) {\n    this.checkAvailable();\n    if (this.location === Location.FOO_MINE) {\n      this.action = MINING_FOO;\n    } else if (this.location === Location.BAR_MINE) {\n      this.action = MINING_BAR;\n    } else {\n      throw new Error(\n        `The robot has to be in a mine to mine, here it is in ${this.location}.`\n      );\n    }\n    this.actionStartTime = currentTime;\n  }\n\n  startAssembling(currentTime: number) {\n    this.checkAvailable();\n    this._checkLocation(Location.ASSEMBLING_FACTORY);\n    this._checkRessources(\n      \"To create a foobar the robot needs one foo and one bar\",\n      ASSEMBLING_NEEDED_RESSOURCES\n    );\n\n    this.action = ASSEMBLING;\n    this.actionStartTime = currentTime;\n    this.store.setBarsAmount(this.store.getBarsAmount() - 1);\n    this.store.setFoosAmount(this.store.getFoosAmount() - 1);\n  }\n\n  startBuyingRobot(currentTime: number) {\n    this.checkAvailable();\n    this._checkLocation(Location.SHOP);\n    this._checkRessources(\n      \"To buy a new robot, the robot needs 6 foos and 3 foobars\",\n      BUYING_ROBOT_NEEDED_RESSOURCES\n    );\n    this.action = BUYING_ROBOT;\n    this.actionStartTime = currentTime;\n    this.store.setFoobarsAmount(this.store.getFoobarsAmount() - 3);\n    this.store.setFoosAmount(this.store.getFoosAmount() - 6);\n  }\n\n  private _checkLocation(location: Location) {\n    if (location !== this.location) {\n      throw new Error(\n        `The robot has to be in the ${location}, here it is in ${this.location}.`\n      );\n    }\n  }\n\n  private _checkLocationSpecified() {\n    if (!this.getNextLocation()) {\n      throw new Error(\n        \"The robot can't start moving without next location specified.\"\n      );\n    }\n  }\n\n  private _checkNotKeepingLocation() {\n    if (this.getKeepLocation()) {\n      throw new Error(\n        \"The robot can't start moving while it has been asked to keep its location.\"\n      );\n    }\n  }\n\n  private _checkRessources(\n    errorMessageBeginning: string,\n    neededRessources: NeededRessources\n  ) {\n    const enoughRessources =\n      this.store.getFoobarsAmount() >= neededRessources.foobars &&\n      this.store.getFoosAmount() >= neededRessources.foos &&\n      this.store.getBarsAmount() >= neededRessources.bars;\n    if (!enoughRessources) {\n      throw new Error(\n        `${errorMessageBeginning}.\n        There are only ${this.store.getFoosAmount()} foos, ${this.store.getBarsAmount()} bars and ${this.store.getFoobarsAmount()} foobars.`\n      );\n    }\n  }\n\n  private checkAvailable() {\n    if (!this.isAvailable()) {\n      throw new Error(`The robot is not available yet`);\n    }\n  }\n\n  canAssemble(): boolean {\n    return this._canDoAction(ASSEMBLING_NEEDED_RESSOURCES);\n  }\n\n  canBuyRobot(): boolean {\n    return this._canDoAction(BUYING_ROBOT_NEEDED_RESSOURCES);\n  }\n\n  private _canDoAction(neededRessources: NeededRessources) {\n    try {\n      this._checkRessources(\"\", neededRessources);\n    } catch {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * State the availability of the robot. A new action can't be started\n   * without the robot being available.\n   */\n  isAvailable(): boolean {\n    return this.action === WAITING;\n  }\n\n  subscribe(information: ObservedRobot, callback: Function) {\n    this.observable.subscribe(information, callback);\n  }\n\n  /**\n   * Set the next location where starting to move will lead.\n   * A movement can't be started without that location set.\n   */\n  setNextLocation(location: Location | null) {\n    this.nextLocation = location;\n    const nextLocations: (Location | null)[] = [];\n    this.store.getRobots().forEach((robot) => {\n      nextLocations.push(robot.getNextLocation());\n    });\n    this.observable.trigger(ObservedRobot.ROBOT_NEXT_LOCATION, nextLocations);\n  }\n\n  getNextLocation(): Location | null {\n    return this.nextLocation;\n  }\n\n  getLocation() {\n    return this.location;\n  }\n\n  setLocation(location: Location) {\n    this.location = location;\n    const locations: Location[] = [];\n    this.store.getRobots().forEach((robot) => {\n      locations.push(robot.getLocation());\n    });\n    this.observable.trigger(ObservedRobot.ROBOT_LOCATION, locations);\n  }\n\n  getAction() {\n    return this.action;\n  }\n\n  setKeepLocation(keepLocation: boolean) {\n    this.keepLocation = keepLocation;\n  }\n\n  getKeepLocation() {\n    return this.keepLocation;\n  }\n}\n\nexport { Robot, Location, ObservedRobot };\n","type WeightedValues<T> = Map<T, number>;\n\ninterface RandomGenerator {\n  /**\n   * Compute a boolean according to a given percentage.\n   * @param percentage the percentage of chances to be true\n   *     (value between 0 and 100).\n   */\n  randomPercentageSuccess(percentage: number): boolean;\n\n  /**\n   * Compute a value between two given values\n   */\n  randomBetweenTwoValues(min: number, max: number): number;\n\n  /**\n   * Choose randomly one of the provided values, according to\n   * the given weights for each value.\n   * If the weight is 0, the value will never be chosen, if it\n   * is a positive number, the bigger it will be compared to\n   * the weight of the other values, the more chances it will\n   * have to be chosen.\n   * @param values the chosen value.\n   */\n  chooseValue<T>(values: WeightedValues<T>): T;\n}\n\nclass RealRandomGenerator implements RandomGenerator {\n  randomPercentageSuccess(percentage: number): boolean {\n    if (percentage < 0 || percentage > 100) {\n      throw new Error(\n        `The given percentage has to be between 0 and 100, not ${percentage}.`\n      );\n    }\n    const random = Math.random() * 100;\n    if (random < percentage) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  randomBetweenTwoValues(min: number, max: number): number {\n    const value = min + Math.random() * (max - min);\n    return value;\n  }\n\n  chooseValue<T>(values: WeightedValues<T>): T {\n    this._checkWeights(values);\n    const weightsSum = Array.from(values.values()).reduce((a, b) => a + b);\n    const random = Math.random() * weightsSum;\n    let chosenValue: T = values.entries().next().value;\n    let sum = 0;\n    for (let [key, value] of values) {\n      sum += value;\n      if (random <= sum) {\n        chosenValue = key;\n        break;\n      }\n    }\n    return chosenValue;\n  }\n\n  private _checkWeights<T>(values: WeightedValues<T>) {\n    const weights = Array.from(values.values());\n    const negativeWeight = weights.some((x) => x < 0);\n    if (negativeWeight) {\n      const entries = Array.from(values.entries());\n      throw new Error(`Negative weights are not allowed. Entries: ${entries}`);\n    }\n    const onlyZeroWeights = weights.every((x) => x === 0);\n    if (onlyZeroWeights) {\n      const entries = Array.from(values.entries());\n      throw new Error(\n        `At least one of the weights has to be > 0. Entries: ${entries}`\n      );\n    }\n  }\n}\n\n/**\n * Fake generator always returning true or the maximal value,\n * used for tests.\n */\nclass SuccessGenerator implements RandomGenerator {\n  randomPercentageSuccess(percentage: number): boolean {\n    return true;\n  }\n\n  randomBetweenTwoValues(min: number, max: number): number {\n    return max;\n  }\n\n  chooseValue<T>(values: WeightedValues<T>): T {\n    const biggestPair = [...values.entries()].reduce((v1, v2) =>\n      v1[1] > v2[1] ? v1 : v2\n    );\n    return biggestPair[0];\n  }\n}\n\n/**\n * Fake generator always returning false or the minimal value,\n * used for tests.\n */\nclass FailureGenerator implements RandomGenerator {\n  randomPercentageSuccess(percentage: number): boolean {\n    return false;\n  }\n\n  randomBetweenTwoValues(min: number, max: number): number {\n    return min;\n  }\n\n  chooseValue<T>(values: WeightedValues<T>): T {\n    const smallestPair = [...values.entries()].reduce((v1, v2) =>\n      v1[1] < v2[1] ? v1 : v2\n    );\n    return smallestPair[0];\n  }\n}\n\nexport { RealRandomGenerator, SuccessGenerator, FailureGenerator };\nexport type { RandomGenerator, WeightedValues };\n","import {\n  ObservableRobot,\n  ObservableStore,\n  ObservedAmount,\n  ObservedRobot,\n} from \"./Observable\";\nimport { Robot } from \"./Robot\";\n\nclass Store {\n  private foosAmount: number;\n  private barsAmount: number;\n  private fooBarsAmount: number;\n  private robots: Robot[];\n  private observable: ObservableStore;\n  private robotsObservable: ObservableRobot;\n\n  constructor() {\n    this.observable = new ObservableStore();\n    this.robotsObservable = new ObservableRobot();\n    this.foosAmount = 0;\n    this.barsAmount = 0;\n    this.fooBarsAmount = 0;\n    this.robots = [];\n  }\n\n  subscribe(information: ObservedAmount, callback: Function) {\n    this.observable.subscribe(information, callback);\n  }\n\n  subscribeToRobots(information: ObservedRobot, callback: Function) {\n    this.robotsObservable.subscribe(information, callback);\n  }\n\n  setFoosAmount(amount: number) {\n    this.foosAmount = amount;\n    this.observable.trigger(ObservedAmount.FOOS_AMOUNT, this.foosAmount);\n  }\n\n  getFoosAmount() {\n    return this.foosAmount;\n  }\n\n  setBarsAmount(amount: number) {\n    this.barsAmount = amount;\n    this.observable.trigger(ObservedAmount.BARS_AMOUNT, this.barsAmount);\n  }\n\n  getBarsAmount() {\n    return this.barsAmount;\n  }\n\n  setFoobarsAmount(amount: number) {\n    this.fooBarsAmount = amount;\n    this.observable.trigger(ObservedAmount.FOOBARS_AMOUNT, this.fooBarsAmount);\n  }\n\n  getFoobarsAmount() {\n    return this.fooBarsAmount;\n  }\n\n  addRobot(robot: Robot) {\n    this.robots.push(robot);\n    this.observable.trigger(ObservedAmount.ROBOTS_AMOUNT, this.robots.length);\n  }\n\n  getRobots() {\n    return this.robots;\n  }\n\n  getRobotsObservable() {\n    return this.robotsObservable;\n  }\n}\n\nexport { Store, ObservedAmount, ObservedRobot };\n","import { DateTime, RealDateTime } from \"./DateTime\";\nimport { ObservedAmount, ObservedRobot } from \"./Observable\";\nimport { Location, Robot } from \"./Robot\";\nimport { Store } from \"./Store\";\nimport { Strategy } from \"./Strategy\";\n\nconst MAX_ROBOTS = 20;\n\ntype GameOptions = {\n  dateTime?: DateTime;\n};\nclass Game {\n  public store: Store;\n  private dateTime: DateTime;\n  private started: boolean;\n  private startTime: number | null;\n\n  constructor(private strategy: Strategy, options?: GameOptions) {\n    this.store = new Store();\n    this.dateTime = options?.dateTime ? options.dateTime : new RealDateTime();\n    new Robot(this.store);\n    new Robot(this.store);\n    this.started = false;\n    this.startTime = null;\n  }\n\n  start() {\n    this.started = true;\n    this.startTime = this.dateTime.getCurrentTime();\n    let requestId = 0;\n    const nextFrame = () => {\n      const now = this.dateTime.getCurrentTime();\n      this.strategy.actOnOneFrame(now, this.store);\n      if (this.started && this.store.getRobots().length < MAX_ROBOTS) {\n        requestId = requestAnimationFrame(nextFrame);\n      } else {\n        cancelAnimationFrame(requestId);\n        this.started = false;\n        this.startTime = null;\n      }\n    };\n    nextFrame();\n  }\n\n  stop() {\n    this.started = false;\n    this.startTime = null;\n  }\n\n  getStartTime() {\n    return this.startTime;\n  }\n\n  getStarted(): boolean {\n    return this.started;\n  }\n\n  getCurrentTime() {\n    if (this.started) {\n      return this.dateTime.getCurrentTime();\n    } else {\n      throw new Error(\"The game is not started\");\n    }\n  }\n\n  getStrategy(): Strategy {\n    return this.strategy;\n  }\n\n  setRobotNextLocation(id: number, location: Location) {\n    this.store.getRobots()[id].setNextLocation(location);\n  }\n\n  getRobotLocation(id: number): Location {\n    return this.store.getRobots()[id].getLocation();\n  }\n\n  subscribeToAmount(information: ObservedAmount, callback: Function) {\n    this.store.subscribe(information, callback);\n  }\n\n  subscribeToRobots(information: ObservedRobot, callback: Function) {\n    this.store.subscribeToRobots(information, callback);\n  }\n}\nexport { Game, MAX_ROBOTS };\n","import { RandomGenerator, RealRandomGenerator } from \"./RandomGenerator\";\nimport { Location, Robot } from \"./Robot\";\nimport { Store } from \"./Store\";\ninterface Strategy {\n  actOnOneFrame(currentTime: number, store: Store): void;\n}\n\ntype BasicStrategyOptions = {\n  randomGenerator?: RandomGenerator;\n};\n\n/**\n * Implements a basic strategy:\n * With a manual part taking priority:\n * - does not move robots that have been manually told to keep location.\n * - moves robots to the indicated manual location if there is one.\n * And an automatic part:\n * - chooses randomly to make an available robot move to a random\n *   location, or instead do an action if possible.\n * - the random aspect of moving or not, and where to move can be\n *   influenced manually.\n */\nclass BasicStrategy implements Strategy {\n  private randomGenerator: RandomGenerator;\n  private automaticMovementProbability: number;\n  private automaticLocationProbabilities: Map<Location, number>;\n\n  constructor(options?: BasicStrategyOptions) {\n    this.randomGenerator = options?.randomGenerator\n      ? options.randomGenerator\n      : new RealRandomGenerator();\n    this.automaticMovementProbability = 25;\n    this.automaticLocationProbabilities = new Map([\n      [Location.FOO_MINE, 50],\n      [Location.BAR_MINE, 50],\n      [Location.ASSEMBLING_FACTORY, 50],\n      [Location.SHOP, 50],\n    ]);\n  }\n\n  /**\n   * This influences the probability to choose automatically one\n   * location instead of another.\n   * @param location the location to influence.\n   * @param weight the heigher the value relatively to others, the\n   *   more chances to go there.\n   */\n  setLocationWeight(location: Location, weight: number) {\n    if (weight < 0) {\n      throw new Error(\n        `The assigned weight ${weight} has to be greater than 0.`\n      );\n    }\n    this.automaticLocationProbabilities.set(location, weight);\n  }\n\n  getLocationWeight(location: Location) {\n    return this.automaticLocationProbabilities.get(location);\n  }\n\n  /**\n   * The percentage of chances to get an automatic move each time.\n   */\n  setAutomaticMovementProbability(probability: number) {\n    this.automaticMovementProbability = probability;\n  }\n\n  getAutomaticMovementProbability() {\n    return this.automaticMovementProbability;\n  }\n\n  /**\n   * Do some action on the content of the store, including robots.\n   * This function is called by the game several times per second.\n   * @param currentTime the time where the function is called.\n   */\n  actOnOneFrame(currentTime: number, store: Store) {\n    store.getRobots().forEach((robot) => {\n      robot.tick(currentTime);\n      if (robot.isAvailable()) {\n        const shouldDoManualMove =\n          robot.getNextLocation() && !robot.getKeepLocation();\n        if (shouldDoManualMove) {\n          robot.startMoving(currentTime);\n        } else {\n          this._handleAutomaticActions(robot, currentTime);\n        }\n      }\n    });\n  }\n\n  private _handleAutomaticActions(robot: Robot, currentTime: number) {\n    const shouldAutomaticallyMove =\n      this.randomGenerator.randomPercentageSuccess(\n        this.automaticMovementProbability\n      ) && !robot.getKeepLocation();\n    if (shouldAutomaticallyMove) {\n      this._doAutomaticMove(robot, currentTime);\n    } else {\n      this._doAutomaticOtherActions(robot, currentTime);\n    }\n  }\n\n  private _doAutomaticMove(robot: Robot, currentTime: number) {\n    const possibleLocations = new Map(this.automaticLocationProbabilities);\n    possibleLocations.delete(robot.getLocation());\n    try {\n      const chosenLocation =\n        this.randomGenerator.chooseValue(possibleLocations);\n      robot.setNextLocation(chosenLocation);\n      robot.startMoving(currentTime);\n    } catch (exception) {\n      if (\n        exception.message.includes(\"At least one of the weights has to be > 0\")\n      ) {\n        // in case of wrong weights (eg. (0, 0, 0)), we just don't move\n      } else {\n        throw exception;\n      }\n    }\n  }\n\n  private _doAutomaticOtherActions(robot: Robot, currentTime: number) {\n    switch (robot.getLocation()) {\n      case Location.FOO_MINE:\n      case Location.BAR_MINE:\n        robot.startMining(currentTime);\n        break;\n      case Location.ASSEMBLING_FACTORY:\n        if (robot.canAssemble()) {\n          robot.startAssembling(currentTime);\n        }\n        break;\n      case Location.SHOP:\n        if (robot.canBuyRobot()) {\n          robot.startBuyingRobot(currentTime);\n        }\n        break;\n      default:\n        throw new Error(\n          `An action has been requested while the robot was the wrong location (${robot.getLocation()}).`\n        );\n    }\n  }\n}\n\nexport { BasicStrategy };\nexport type { Strategy };\n","import React from \"react\";\nimport { BasicStrategy, Game } from \"../../domain\";\n\nconst GameContext = React.createContext<Game>(new Game(new BasicStrategy()));\n\nexport default GameContext;\n","import styled from \"@emotion/styled\";\nimport { useContext, useEffect, useState } from \"react\";\nimport GameContext from \"../../contexts/game\";\n\nconst Span = styled.span`\n  font-size: 1.6rem;\n  padding: 0.5rem 0;\n\n  @media (min-width: 600px) {\n    font-size: 1.7rem;\n  }\n  @media (min-width: 950px) {\n    font-size: 1.8rem;\n  }\n`;\n\n/**\n * Count the current time according to the game internal date time.\n * The counter freezes when the game is finished.\n * This value is updated every 0.1 seconds, which is enough to show\n * animated seconds.\n */\nfunction Counter() {\n  const game = useContext(GameContext);\n  const [time, setTime] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (game.getStarted()) {\n        try {\n          setTime(game.getCurrentTime());\n        } catch {\n          clearInterval(interval);\n        }\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  }, [game]);\n\n  function formatDate(time: number) {\n    const startTime = game.getStartTime();\n    if (startTime) {\n      const date = new Date(time - startTime);\n      const min = formatNumber(date.getMinutes());\n      const sec = formatNumber(date.getSeconds());\n      return `${min}:${sec}`;\n    } else {\n      return \"00:00\";\n    }\n  }\n  function formatNumber(number: number) {\n    return number < 10 ? \"0\" + number : \"\" + number;\n  }\n\n  return <Span>{formatDate(time)}</Span>;\n}\n\nexport default Counter;\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst liStyle = css`\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem 0;\n`;\n\ntype LiProps = {\n  first?: boolean;\n};\n\nconst Li = styled.li<LiProps>`\n  ${liStyle}\n  ${({ first }) =>\n    first\n      ? `margin-bottom: 2rem;\n        @media (min-width: 950px) {\n          margin-bottom: 0;\n          grid-column: span 2;\n          width: 60%;\n          justify-self: center;\n        }`\n      : \"\"}\n`;\n\nconst useStyles = makeStyles({\n  root: {\n    '& .MuiSlider-markLabel[data-index=\"0\"]': {\n      transform: \"translateX(0%)\",\n    },\n    '& .MuiSlider-markLabel[data-index=\"1\"]': {\n      transform: \"translateX(-100%)\",\n    },\n  },\n});\n\nconst percentageMarks = [\n  {\n    value: 0,\n    label: \"0%\",\n  },\n  {\n    value: 100,\n    label: \"100%\",\n  },\n];\n\ntype SliderCommandProps = {\n  id: string;\n  text: string;\n  defaultValue: number | undefined;\n  onChange: (event: object, value: number | number[]) => void;\n  first?: boolean;\n};\n\nfunction SliderCommand({\n  id,\n  text,\n  defaultValue,\n  onChange,\n  first,\n}: SliderCommandProps) {\n  const classes = useStyles();\n  return (\n    <Li first={first}>\n      <label id={id}>{text}</label>\n      <Slider\n        defaultValue={defaultValue}\n        valueLabelDisplay=\"auto\"\n        onChangeCommitted={onChange}\n        aria-labelledby={id}\n        marks={first && percentageMarks}\n        className={classes.root}\n      />\n    </Li>\n  );\n}\n\nexport default SliderCommand;\n","import styled from \"@emotion/styled\";\nimport { useContext } from \"react\";\nimport { BasicStrategy, Location } from \"../../../domain\";\nimport GameContext from \"../../contexts/game\";\nimport SliderCommand from \"./SliderCommand\";\n\nconst List = styled.ul`\n  list-style-type: none;\n  padding-left: 0;\n  padding-top: 2rem;\n  border-top: solid 1px #ddd;\n  display: grid;\n\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n    border: none;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1.3fr 1fr 1fr;\n    column-gap: 5%;\n  }\n`;\n\n/**\n * Provide slider commands to control the game automatic mode\n * by influencing the random actions.\n */\nfunction ProbabilityCommands() {\n  const game = useContext(GameContext);\n  const strategy = game.getStrategy() as BasicStrategy;\n  function handleMovementProbabilityChange(\n    _: object,\n    value: number | number[]\n  ) {\n    strategy.setAutomaticMovementProbability(value as number);\n  }\n  function createLocationWeightChangeHandler(location: Location) {\n    return function handleLocationWeightChange(\n      _: object,\n      value: number | number[]\n    ) {\n      strategy.setLocationWeight(location, value as number);\n    };\n  }\n  return (\n    <List>\n      <SliderCommand\n        id=\"movement-probability\"\n        text=\"Probability to move\"\n        defaultValue={strategy.getAutomaticMovementProbability()}\n        onChange={handleMovementProbabilityChange}\n        first={true}\n      />\n      <SliderCommand\n        id=\"foo-mine-weight\"\n        text=\"Foo mine weight\"\n        defaultValue={strategy.getLocationWeight(Location.FOO_MINE)}\n        onChange={createLocationWeightChangeHandler(Location.FOO_MINE)}\n      />\n      <SliderCommand\n        id=\"bar-mine-weight\"\n        text=\"Bar mine weight\"\n        defaultValue={strategy.getLocationWeight(Location.BAR_MINE)}\n        onChange={createLocationWeightChangeHandler(Location.BAR_MINE)}\n      />\n      <SliderCommand\n        id=\"assembling-factory-weight\"\n        text=\"Assembling factory weight\"\n        defaultValue={strategy.getLocationWeight(Location.ASSEMBLING_FACTORY)}\n        onChange={createLocationWeightChangeHandler(\n          Location.ASSEMBLING_FACTORY\n        )}\n      />\n      <SliderCommand\n        id=\"shop-weight\"\n        text=\"Shop weight\"\n        defaultValue={strategy.getLocationWeight(Location.SHOP)}\n        onChange={createLocationWeightChangeHandler(Location.SHOP)}\n      />\n    </List>\n  );\n}\n\nexport default ProbabilityCommands;\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\n\n// these factors mulpitply the arrows' size for smaller viewports\nconst SMALL_RESPONSIVE_FACTOR = 1.6;\nconst MEDIUM_RESPONSIVE_FACTOR = 1.3;\n\ntype ArrowContainerProps = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n  size: number;\n  rotate: number;\n  children: React.ReactNode;\n};\n\ntype SpecificArrowProps = {\n  size: number;\n  value: number;\n};\n\nfunction FooArrow({ size, value }: SpecificArrowProps) {\n  return (\n    <ArrowContainer top={5} left={30} rotate={170} size={size}>\n      <ArrowValue value={value} top={1.5} right={1} size={size} />\n    </ArrowContainer>\n  );\n}\n\nfunction BarArrow({ size, value }: SpecificArrowProps) {\n  return (\n    <ArrowContainer top={5} right={30} rotate={300} size={size}>\n      <ArrowValue value={value} top={1.5} left={1} size={size} />\n    </ArrowContainer>\n  );\n}\n\nfunction FactoryArrow({ size, value }: SpecificArrowProps) {\n  return (\n    <ArrowContainer bottom={5} left={30} rotate={120} size={size}>\n      <ArrowValue value={value} bottom={1.5} right={1} size={size} />\n    </ArrowContainer>\n  );\n}\n\nfunction ShopArrow({ size, value }: SpecificArrowProps) {\n  return (\n    <ArrowContainer bottom={5} right={30} rotate={350} size={size}>\n      <ArrowValue value={value} bottom={1.5} left={1} size={size} />\n    </ArrowContainer>\n  );\n}\n\nfunction ArrowContainer({\n  top,\n  bottom,\n  left,\n  right,\n  size,\n  rotate,\n  children,\n}: ArrowContainerProps) {\n  function buildRules(size: number) {\n    return `${top ? buildVerticalPositionRule(\"top\", top, size) : \"\"}\n        ${bottom ? buildVerticalPositionRule(\"bottom\", bottom, size) : \"\"}\n        ${left ? buildHorizontalPositionRule(\"left\", left, size) : \"\"}\n        ${right ? buildHorizontalPositionRule(\"right\", right, size) : \"\"}\n        `;\n  }\n  function buildVerticalPositionRule(\n    positionName: string,\n    position: number,\n    size: number\n  ) {\n    return `${positionName}: calc(${position}rem - calc(${size}rem / 2));`;\n  }\n  function buildHorizontalPositionRule(\n    positionName: string,\n    position: number,\n    size: number\n  ) {\n    return `${positionName}: calc(${position}% - calc(${size}rem / 2));`;\n  }\n  return (\n    <div\n      css={css`\n        transition: all 0.3s ease;\n        transition-property: top, bottom, left, right;\n        position: absolute;\n        ${buildRules(size / SMALL_RESPONSIVE_FACTOR)}\n\n        @media (min-width: 450px) {\n          ${buildRules(size / MEDIUM_RESPONSIVE_FACTOR)}\n        }\n        @media (min-width: 600px) {\n          ${buildRules(size)}\n        }\n      `}\n    >\n      <Arrow rotate={rotate} size={size} />\n      {children}\n    </div>\n  );\n}\n\ntype ArrowProps = {\n  rotate: number;\n  size: number;\n};\n\nfunction Arrow({ rotate, size }: ArrowProps) {\n  return (\n    // SVG Arrow by Daria Szymonowicz from the Noun Project\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      css={css`\n        transition: all 0.3s ease;\n        transition-property: width, height;\n        transform: rotate(${rotate}deg);\n        width: ${size / SMALL_RESPONSIVE_FACTOR}rem;\n        height: ${size / SMALL_RESPONSIVE_FACTOR}rem;\n\n        @media (min-width: 450px) {\n          width: ${size / MEDIUM_RESPONSIVE_FACTOR}rem;\n          height: ${size / MEDIUM_RESPONSIVE_FACTOR}rem;\n        }\n        @media (min-width: 600px) {\n          width: ${size}rem;\n          height: ${size}rem;\n        }\n      `}\n      height=\"100%\"\n      width=\"100%\"\n      viewBox=\"0 0 100 100\"\n    >\n      <g>\n        <path d=\"M84.68,75.29l-13.78-31L64,53.77c-2.89-1.86-5.92-3.51-8.87-5.28L42.23,40.37C33.55,35,24.81,29.77,15.93,24.71l-.61.83c7.56,6.88,15.26,13.56,23,20.17l11.72,9.8c2.6,2.25,5.11,4.63,7.77,6.8L51,71.75Z\" />\n      </g>\n    </svg>\n  );\n}\n\ntype ArrowValueProps = {\n  value: number;\n  size: number;\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\nfunction ArrowValue({\n  value,\n  size,\n  top,\n  bottom,\n  left,\n  right,\n}: ArrowValueProps) {\n  const fontSizeFactor = 4.4;\n  const horizontalPositionFactor = 5;\n  const verticalPositionFactor = 7;\n  function buildRules(size: number) {\n    return `${top ? buildVerticalPositionRule(\"top\", top, size) : \"\"}\n        ${bottom ? buildVerticalPositionRule(\"bottom\", bottom, size) : \"\"}\n        ${left ? buildHorizontalPositionRule(\"left\", left, size) : \"\"}\n        ${right ? buildHorizontalPositionRule(\"right\", right, size) : \"\"}\n        font-size: ${size / fontSizeFactor}rem;\n        `;\n  }\n  function buildVerticalPositionRule(\n    positionName: string,\n    position: number,\n    size: number\n  ) {\n    return `${positionName}: ${(position * size) / verticalPositionFactor}rem;`;\n  }\n  function buildHorizontalPositionRule(\n    positionName: string,\n    position: number,\n    size: number\n  ) {\n    return `${positionName}: ${\n      (position * size) / horizontalPositionFactor\n    }rem;`;\n  }\n  return (\n    <span\n      css={css`\n        position: absolute;\n        transition: all 0.3s ease;\n        transition-property: font-size, top, bottom, left, right;\n        ${buildRules(size / SMALL_RESPONSIVE_FACTOR)}\n\n        @media (min-width: 450px) {\n          ${buildRules(size / MEDIUM_RESPONSIVE_FACTOR)}\n        }\n        @media (min-width: 600px) {\n          ${buildRules(size)}\n        }\n      `}\n    >\n      {value}\n    </span>\n  );\n}\n\nexport { FooArrow, BarArrow, FactoryArrow, ShopArrow };\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\n\n// these factors mulpitply the circles' size for smaller viewports\nconst SMALL_RESPONSIVE_FACTOR = 1.6;\nconst MEDIUM_RESPONSIVE_FACTOR = 1.3;\nconst FONT_FACTOR = 1.5;\n\ntype CircleProps = {\n  size: number;\n  positions: string;\n  children: React.ReactNode;\n};\n\ntype SpecificCircleProps = {\n  size: number;\n  children: React.ReactNode;\n};\n\nconst circle = css`\n  position: absolute;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  transition-property: width, height, top, left, font-size;\n  background-color: #333;\n  color: #eee;\n  display: grid;\n  place-content: center;\n`;\n\nfunction FooCircle({ size, children }: SpecificCircleProps) {\n  return (\n    <Circle size={size} positions=\"top: 0; left: 0;\">\n      {children}\n    </Circle>\n  );\n}\n\nfunction BarCircle({ size, children }: SpecificCircleProps) {\n  return (\n    <Circle size={size} positions=\"top: 0; right: 0;\">\n      {children}\n    </Circle>\n  );\n}\n\nfunction FactoryCircle({ size, children }: SpecificCircleProps) {\n  return (\n    <Circle size={size} positions=\"bottom: 0; left: 0;\">\n      {children}\n    </Circle>\n  );\n}\n\nfunction ShopCircle({ size, children }: SpecificCircleProps) {\n  return (\n    <Circle size={size} positions=\"bottom: 0; right: 0;\">\n      {children}\n    </Circle>\n  );\n}\n\nfunction Circle({ size, positions, children }: CircleProps) {\n  function buildRules(size: number) {\n    return `width: ${size}rem;\n        height: ${size}rem;\n        font-size: ${size / FONT_FACTOR}rem;\n        `;\n  }\n  return (\n    <div\n      css={css`\n        ${circle}\n        ${positions}\n        ${buildRules(size / SMALL_RESPONSIVE_FACTOR)}\n\n        @media (min-width: 450px) {\n          ${buildRules(size / MEDIUM_RESPONSIVE_FACTOR)}\n        }\n        @media (min-width: 600px) {\n          ${buildRules(size)}\n        }\n      `}\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction MovingCircle({ size, children }: SpecificCircleProps) {\n  function buildRules(size: number) {\n    return `top: calc(50% - calc(${size}rem / 2));\n        left: calc(50% - calc(${size}rem / 2));\n        width: ${size}rem;\n        height: ${size}rem;\n        font-size: ${size / FONT_FACTOR}rem;\n        `;\n  }\n  return (\n    <div\n      css={css`\n        ${circle}\n        ${buildRules(size / SMALL_RESPONSIVE_FACTOR)}\n\n        @media (min-width: 450px) {\n          ${buildRules(size / MEDIUM_RESPONSIVE_FACTOR)}\n        }\n        @media (min-width: 600px) {\n          ${buildRules(size)}\n        }\n      `}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport { FooCircle, BarCircle, FactoryCircle, ShopCircle, MovingCircle };\n","class IncrementableMap<T> extends Map<T, number> {\n  increment(key: T) {\n    this.has(key) && this.set(key, (this.get(key) as number) + 1);\n  }\n  decrement(key: T) {\n    this.has(key) && this.set(key, (this.get(key) as number) - 1);\n  }\n}\n\nexport { IncrementableMap };\n","import { useEffect, useState } from \"react\";\nimport { Game, ObservedAmount, ObservedRobot } from \"../../domain\";\n\n/**\n * These hooks create observer states, subscribing to the game\n * observable API.\n */\n\ninterface UseGameStateProps<T> {\n  game: Game;\n  initialValue: T;\n}\n\ninterface UseStoreStateProps<T> extends UseGameStateProps<T> {\n  observed: ObservedAmount;\n}\n\ninterface UseRobotStateProps<T> extends UseGameStateProps<T> {\n  observed: ObservedRobot;\n}\n\nfunction useStoreState<T>({\n  game,\n  initialValue,\n  observed,\n}: UseStoreStateProps<T>) {\n  const [storeState, setStoreState] = useState<T>(initialValue);\n  useEffect(\n    function observeStore() {\n      game.subscribeToAmount(observed, setStoreState);\n    },\n    [game, observed]\n  );\n  return storeState;\n}\n\nfunction useRobotState<T>({\n  game,\n  initialValue,\n  observed,\n}: UseRobotStateProps<T>) {\n  const [robotState, setRobotState] = useState<T>(initialValue);\n  useEffect(\n    function observeRobot() {\n      game.subscribeToRobots(observed, setRobotState);\n    },\n    [game, observed]\n  );\n  return robotState;\n}\n\nexport { useStoreState, useRobotState };\n","import { useMemo } from \"react\";\nimport { Game, Location, ObservedRobot } from \"../../../domain\";\nimport { IncrementableMap } from \"../../../utils\";\nimport { useRobotState } from \"../../hooks/useGameState\";\n\n/**\n * Build and return a Map associating locations with the number\n * of robots on that location.\n */\nfunction useRobotsAmountByLocation(game: Game) {\n  const { robotsValues } = useRobotsValue<Location>({\n    game,\n    observedType: ObservedRobot.ROBOT_LOCATION,\n    mapInitialValue: [\n      [Location.FOO_MINE, 0],\n      [Location.BAR_MINE, 0],\n      [Location.ASSEMBLING_FACTORY, 0],\n      [Location.SHOP, 0],\n      [Location.TRANSITION, 0],\n    ],\n  });\n  return { robotsAmountByLocation: robotsValues };\n}\n\n/**\n * Build and return a Map associating locations with the number\n * of robots that are currently moving to that location.\n */\nfunction useRobotsAmountByNextLocation(game: Game) {\n  const { robotsValues } = useRobotsValue<Location | null>({\n    game,\n    observedType: ObservedRobot.ROBOT_NEXT_LOCATION,\n    mapInitialValue: [\n      [Location.FOO_MINE, 0],\n      [Location.BAR_MINE, 0],\n      [Location.ASSEMBLING_FACTORY, 0],\n      [Location.SHOP, 0],\n    ],\n  });\n  return { robotsAmountByNextLocation: robotsValues };\n}\n\ntype RobotsValueProps<T> = {\n  game: Game;\n  observedType: ObservedRobot;\n  mapInitialValue: [T, any][];\n};\n\nfunction useRobotsValue<T>({\n  game,\n  observedType,\n  mapInitialValue,\n}: RobotsValueProps<T>) {\n  const robotsNextLocation = useRobotState<T[]>({\n    game,\n    initialValue: [],\n    observed: observedType,\n  });\n\n  const robotsValues = useMemo(() => {\n    let locations = new IncrementableMap<T>(mapInitialValue);\n    robotsNextLocation.forEach((location) => {\n      locations.increment(location);\n    });\n    return locations;\n  }, [robotsNextLocation, mapInitialValue]);\n\n  return { robotsValues };\n}\n\nexport { useRobotsAmountByLocation, useRobotsAmountByNextLocation };\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled\";\nimport { useContext } from \"react\";\nimport { Location } from \"../../../domain\";\nimport GameContext from \"../../contexts/game\";\nimport { BarArrow, FactoryArrow, FooArrow, ShopArrow } from \"./arrows\";\nimport {\n  BarCircle,\n  FactoryCircle,\n  FooCircle,\n  MovingCircle,\n  ShopCircle,\n} from \"./circles\";\nimport {\n  useRobotsAmountByLocation,\n  useRobotsAmountByNextLocation,\n} from \"./useRobotsAmountByLocation\";\n\nconst MainSquare = styled.ul`\n  height: 15rem;\n  position: relative;\n  margin: 3rem 0 3.7rem 0;\n  list-style-type: none;\n  padding: 0;\n\n  @media (min-width: 950px) {\n    flex: 1.35;\n    height: 17rem;\n  }\n`;\n\nconst label = css`\n  position: absolute;\n  font-weight: bold;\n  padding: 0.2rem 0;\n  font-size: 1rem;\n\n  @media (min-width: 400px) {\n    font-size: 1.05rem;\n  }\n  @media (min-width: 600px) {\n    font-size: 1.13rem;\n  }\n`;\nconst FooLabel = styled.span`\n  ${label}\n  top: -2.1rem;\n  left: 0;\n`;\nconst BarLabel = styled.span`\n  ${label}\n  top: -2.1rem;\n  right: 0;\n`;\nconst FactoryLabel = styled.span`\n  ${label}\n  bottom: -2.2rem;\n  left: 0;\n`;\nconst ShopLabel = styled.span`\n  ${label}\n  bottom: -2.2rem;\n  right: 0;\n`;\nconst MovingLabel = styled.span`\n  ${label}\n  transition: all 0.3s ease;\n  transition-property: top, left;\n  color: black;\n  bottom: -2rem;\n  left: calc(50% - 2rem);\n`;\n\n/**\n * Display a high level graphical view of robots current and next locations.\n */\nfunction RobotsLocations() {\n  const game = useContext(GameContext);\n  const { robotsAmountByLocation } = useRobotsAmountByLocation(game);\n  const { robotsAmountByNextLocation } = useRobotsAmountByNextLocation(game);\n  const totalRobotsAmount = game.store.getRobots().length;\n  const totalRobotsWithNextLocation = game.store\n    .getRobots()\n    .reduce(function amountWithNextLocation(accumulator, robot) {\n      return robot.getNextLocation() ? accumulator + 1 : accumulator;\n    }, 0);\n  const circleSizeFactor = 7;\n  const arrowSizeFactor = 8;\n  function computeCircleSize(location: Location) {\n    const robotsInlocation = robotsAmountByLocation.get(location);\n    /* With the square root division the circle sizes increase in a\n       softer way: a circle with 1 robot will be 3.9 times smaller\n       than a circle with 15 robots, instead of 15 times smaller. */\n    return totalRobotsAmount && robotsInlocation\n      ? (Math.sqrt(robotsInlocation) / Math.sqrt(totalRobotsAmount)) *\n          circleSizeFactor\n      : 0;\n  }\n  function computeArrowSize(location: Location) {\n    const robotsNextlocation = robotsAmountByNextLocation.get(location);\n    /* For arrow sizes we use the 3rd root instead of the square root\n       to get an even softer change */\n    return totalRobotsWithNextLocation && robotsNextlocation\n      ? (Math.pow(robotsNextlocation, 1 / 3) /\n          Math.pow(totalRobotsWithNextLocation, 1 / 3)) *\n          arrowSizeFactor\n      : 0;\n  }\n  return (\n    <MainSquare>\n      <li>\n        <FooLabel>Foo mine</FooLabel>\n        <FooCircle size={computeCircleSize(Location.FOO_MINE)}>\n          {robotsAmountByLocation.get(Location.FOO_MINE)}\n        </FooCircle>\n        <FooArrow\n          size={computeArrowSize(Location.FOO_MINE)}\n          value={robotsAmountByNextLocation.get(Location.FOO_MINE) as number}\n        />\n      </li>\n      <li>\n        <BarLabel>Bar mine</BarLabel>\n        <BarCircle size={computeCircleSize(Location.BAR_MINE)}>\n          {robotsAmountByLocation.get(Location.BAR_MINE)}\n        </BarCircle>\n        <BarArrow\n          size={computeArrowSize(Location.BAR_MINE)}\n          value={robotsAmountByNextLocation.get(Location.BAR_MINE) as number}\n        />\n      </li>\n      <li>\n        <FactoryLabel>Assembling factory</FactoryLabel>\n        <FactoryCircle size={computeCircleSize(Location.ASSEMBLING_FACTORY)}>\n          {robotsAmountByLocation.get(Location.ASSEMBLING_FACTORY)}\n        </FactoryCircle>\n        <FactoryArrow\n          size={computeArrowSize(Location.ASSEMBLING_FACTORY)}\n          value={\n            robotsAmountByNextLocation.get(\n              Location.ASSEMBLING_FACTORY\n            ) as number\n          }\n        />\n      </li>\n      <li>\n        <ShopLabel>Shop</ShopLabel>\n        <ShopCircle size={computeCircleSize(Location.SHOP)}>\n          {robotsAmountByLocation.get(Location.SHOP)}\n        </ShopCircle>\n        <ShopArrow\n          size={computeArrowSize(Location.SHOP)}\n          value={robotsAmountByNextLocation.get(Location.SHOP) as number}\n        />\n      </li>\n      <li>\n        <MovingCircle size={computeCircleSize(Location.TRANSITION)}>\n          <MovingLabel>Moving</MovingLabel>\n          {robotsAmountByLocation.get(Location.TRANSITION)}\n        </MovingCircle>\n      </li>\n    </MainSquare>\n  );\n}\n\nexport default RobotsLocations;\n","import styled from \"@emotion/styled\";\nimport { useContext } from \"react\";\nimport { MAX_ROBOTS, ObservedAmount } from \"../../../domain\";\nimport GameContext from \"../../contexts/game\";\nimport { useStoreState } from \"../../hooks\";\n\nconst List = styled.ul`\n  display: flex;\n  list-style-type: none;\n  padding: 0;\n  justify-content: space-around;\n  background-color: #eee;\n  border-radius: 0.3rem;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15);\n  padding: 0.3rem 0;\n\n  @media (min-width: 950px) {\n    flex: 1;\n    margin-right: 7%;\n    flex-wrap: wrap;\n    border-radius: 0.4rem;\n    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);\n  }\n  @media (min-width: 1200px) {\n    margin-right: 6%;\n  }\n`;\nconst Li = styled.li`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media (min-width: 950px) {\n    flex-basis: 50%;\n    justify-content: center;\n  }\n`;\n\nconst Label = styled.span`\n  font-weight: bold;\n  padding: 0.2rem 0.4rem;\n\n  @media (min-width: 950px) {\n    margin-bottom: 0.3rem;\n  }\n`;\nconst Value = styled.span`\n  padding: 0.2rem 0.4rem;\n  font-size: 1.1rem;\n\n  @media (min-width: 500px) {\n    font-size: 1.4rem;\n  }\n  @media (min-width: 950px) {\n    padding-top: 0.3rem;\n    font-size: 1.7rem;\n  }\n`;\n\n/**\n * Display statistics on what is available in the game store.\n */\nfunction Statistics() {\n  const game = useContext(GameContext);\n  const foosAmount = useStoreState<number>({\n    game,\n    initialValue: game.store.getFoosAmount(),\n    observed: ObservedAmount.FOOS_AMOUNT,\n  });\n  const barsAmount = useStoreState<number>({\n    game,\n    initialValue: game.store.getBarsAmount(),\n    observed: ObservedAmount.BARS_AMOUNT,\n  });\n  const foobarsAmount = useStoreState<number>({\n    game,\n    initialValue: game.store.getFoobarsAmount(),\n    observed: ObservedAmount.FOOBARS_AMOUNT,\n  });\n  const robotsAmount = useStoreState<number>({\n    game,\n    initialValue: game.store.getRobots().length,\n    observed: ObservedAmount.ROBOTS_AMOUNT,\n  });\n  return (\n    <List>\n      <Li>\n        <Label>Foos</Label>\n        <Value>{foosAmount}</Value>\n      </Li>\n      <Li>\n        <Label>Bars</Label>\n        <Value>{barsAmount}</Value>\n      </Li>\n      <Li>\n        <Label>Foobars</Label>\n        <Value>{foobarsAmount}</Value>\n      </Li>\n      <Li>\n        <Label>Robots</Label>\n        <Value>\n          {robotsAmount} / {MAX_ROBOTS}\n        </Value>\n      </Li>\n    </List>\n  );\n}\n\nexport default Statistics;\n","import styled from \"@emotion/styled\";\nimport { useEffect, useRef } from \"react\";\nimport { BasicStrategy, Game } from \"../domain\";\nimport { Counter } from \"./components/Counter\";\nimport { ProbabilityCommands } from \"./components/ProbabilityCommands\";\nimport { RobotsLocations } from \"./components/RobotsLocations\";\nimport { Statistics } from \"./components/Statistics\";\nimport GameContext from \"./contexts/game\";\nimport \"./global.css\";\n\nconst Main = styled.main`\n  padding: 1rem;\n  display: flex;\n  justify-content: center;\n\n  @media (min-width: 450px) {\n    padding: 1rem 2rem;\n  }\n  @media (min-width: 600px) {\n    padding: 1rem 8%;\n  }\n  @media (min-width: 950px) {\n    padding: 1rem 4rem;\n  }\n`;\n\nconst Container = styled.div`\n  flex: 1;\n  max-width: 1200px;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 950px) {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    align-content: flex-start;\n  }\n`;\n\nconst TitleContainer = styled.div`\n  margin: 1rem 0;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 350px) {\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 0;\n  padding: 0.5rem 0;\n\n  @media (min-width: 950px) {\n    flex-basis: 100%;\n  }\n`;\n\n/**\n * The main component holding the whole app.\n */\nfunction Foobartory() {\n  const game = useRef(new Game(new BasicStrategy()));\n  useEffect(() => {\n    game.current.start();\n  }, []);\n  return (\n    <GameContext.Provider value={game.current}>\n      <Main role=\"main\">\n        <Container>\n          <TitleContainer>\n            <Title>Foobartory</Title>\n            <Counter />\n          </TitleContainer>\n          <Statistics />\n          <RobotsLocations />\n          <ProbabilityCommands />\n        </Container>\n      </Main>\n    </GameContext.Provider>\n  );\n}\n\nexport default Foobartory;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport Foobartory from \"./ui/Foobartory\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Foobartory />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}